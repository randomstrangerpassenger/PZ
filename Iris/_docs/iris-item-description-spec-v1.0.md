# Iris 아이템 설명 설계 스펙

**버전**: 1.0  
**상태**: FINAL  
**문서 유형**: 설계 명세서

---

## 1. 목적

이 문서는 Iris 메뉴의 **아이템 설명(Item Description)** 구성 원칙과 구조를 정의한다.

### 1.1 이 문서가 다루는 것

- 아이템 설명의 내부 구성
- 설명 블록의 단위와 순서
- 주 소분류(Primary Subcategory)의 정의와 동작
- 허용/금지되는 서술 방식

### 1.2 이 문서가 다루지 않는 것

- 대분류/소분류 구조 (기존 문서 유지)
- 분류 규칙 (Evidence Table, Rule DSL 관할)
- UI/UX 레이아웃 (별도 문서)

---

## 2. Iris의 역할 (전제)

### 2.1 Iris는 무엇인가

> **"툴팁만으로는 알 수 없는 아이템의 모든 용도와 행위를 위키 형태로 제공한다"**

### 2.2 Iris는 무엇이 아닌가

| Iris가 아닌 것 | 설명 |
|----------------|------|
| 툴팁 복제기 | 바닐라 툴팁에 있는 정보만 나열하지 않는다 |
| 판단 엔진 | "이게 더 좋다"를 말하지 않는다 |
| 추천 시스템 | "이걸 쓰세요"를 말하지 않는다 |
| 비교 도구 | "A가 B보다 강하다"를 말하지 않는다 |

### 2.3 바닐라 툴팁과의 차이

| 바닐라 툴팁 | Iris |
|-------------|------|
| 아이템 **속성** 나열 | 아이템 **용도** 서술 |
| "HungerChange: -30" | "먹을 수 있다, 요리 재료로 쓸 수 있다" |
| "MinDamage: 1.2" | "무기로 쓸 수 있다, 벌목에 쓸 수 있다" |

---

## 3. 설명의 중심축: 행위(Action)

### 3.1 원칙

> **아이템 설명은 수치가 아니라 행위가 주가 된다.**

### 3.2 행위의 정의

> **플레이어가 해당 아이템으로 실제 수행 가능한 행동 단위**

### 3.3 행위와 수치의 관계

| 구분 | 역할 | 예시 |
|------|------|------|
| 행위 (주) | 설명의 핵심 | "먹을 수 있다", "상처에 감을 수 있다" |
| 수치 (부) | 행위에 종속된 부가 정보 | "배고픔 -30", "공격력 1.2~2.4" |

### 3.4 수치 표시 정책

| 허용 | 금지 |
|------|------|
| 수치 그대로 표시 | 수치 기반 등급/티어 부여 |
| 효과 방향성 서술 (증가/감소) | 수치 비교 ("A가 B보다 높다") |

---

## 4. 행위 표현 방식

### 4.1 행위 종류 (Action Type)

행위 종류는 **고정된 목록**이다.

> ⚠️ 행위 종류는 분류를 결정하지 않으며, 설명 문단을 정렬·그룹화하기 위한 표현 단위다.

| 행위 종류 | 설명 |
|-----------|------|
| 섭취 | 먹거나 마시는 행위 |
| 의료 | 치료, 붕대, 소독 등 |
| 전투 | 무기로 사용 |
| 제작 | 레시피의 재료 또는 도구로 사용 |
| 분해 | 가구/물건 분해에 사용 |
| 정비 | 차량/발전기 수리에 사용 |
| 농업 | 농사, 벌목, 채집에 사용 |
| 학습 | 스킬 훈련, 레시피 해금 |
| 기타 | 위에 해당하지 않는 용도 |

### 4.2 행위 구체 내용 (Action Detail)

행위의 구체 내용은 **아이템/소분류별로 동적 활성화**된다.

```
행위 종류: 제작
행위 구체 내용: "목공 제작의 재료로 사용된다" (Resource.4-A)
행위 구체 내용: "목공 제작에 도구로 필요하다" (Tool.1-A)
```

### 4.3 행위 도출 방식

| 허용 | 금지 |
|------|------|
| Evidence 기반 도출 | 자동 추론 |
| 소분류 템플릿 기반 | DisplayName에서 의미 추출 |

---

## 5. 아이템 설명 구조

### 5.1 기존 Iris 구조 (변경 없음)

```
대분류 → 소분류 → 아이템 목록 → 아이템 설명
```

### 5.2 아이템 설명 내부 구조

아이템 설명은 **소분류 설명 블록(Subcategory Description Block)**의 집합이다.

```
[아이템 설명]
├─ 소분류 설명 블록 1 (주 소분류)
├─ 소분류 설명 블록 2
├─ 소분류 설명 블록 3
└─ ...
```

### 5.3 소분류 설명 블록

각 블록은 **해당 소분류 관점에서의 행위 묶음**을 서술한다.

```
[Tool · Construction (1-A)]
이 아이템은 목공 및 금속 제작에 도구로 사용된다.
특정 제작 레시피의 수행 조건으로 요구된다.

[Combat · Short Blunt (2-C)]
이 아이템은 근접 전투에서 무기로 사용된다.
한 손으로 사용하는 둔기 계열이다.
공격력: 0.8 ~ 1.5
```

---

## 6. 주 소분류 (Primary Subcategory)

### 6.1 목적

| 목적 | 설명 |
|------|------|
| 유저 인식과 시스템 분류 간 괴리 방지 | 프라이팬을 찾는 유저는 "조리 도구"를 기대 |
| 설명의 출발점(anchor) 제공 | 가장 대표적인 맥락을 먼저 보여줌 |

### 6.2 성격

| 성격 | 해당 여부 |
|------|-----------|
| 판정 | ❌ |
| 규칙 | ❌ |
| 추천 | ❌ |
| 표시·정렬용 메타 정보 | ✅ |

### 6.3 효과 범위

| 영향을 주는 것 | 영향을 주지 않는 것 |
|----------------|---------------------|
| 설명 블록 표시 순서 | 분류 결과 |
| | 소분류 포함 여부 |
| | 설명 내용 자체 |

### 6.4 데이터 출처

주 소분류는 **별도 메타 데이터**로 관리한다.

- Evidence Table / Rule DSL과 분리
- 설명·표현 계층 전용

```json
{
  "Base.Pan": {
    "iris_meta": {
      "primary_subcategory": "Tool.1-D"
    }
  }
}
```

### 6.5 기본값 규칙

주 소분류가 명시되지 않은 경우:

> **첫 번째 소분류를 주 소분류로 간주한다.**

#### "첫 번째"의 정의

**대분류 번호 순**으로 결정한다.

| 순서 | 대분류 |
|------|--------|
| 1 | Tool (1) |
| 2 | Combat (2) |
| 3 | Consumable (3) |
| 4 | Resource (4) |
| 5 | Literature (5) |
| 6 | Wearable (6) |

동일 대분류 내에서는 **소분류 코드 순** (A → B → C → ...).

#### 기본값 예시

```
분류 결과: { Combat.2-C, Tool.1-A, Tool.1-B }
정렬: Tool.1-A, Tool.1-B, Combat.2-C
기본 주 소분류: Tool.1-A
```

#### 근거

- 추가 판단 없음
- 자동 추론 없음
- 기존 분류 체계 존중
- 헌법적으로 가장 무개입(default)

---

## 7. 설명 서술 정책

### 7.1 허용되는 서술

| 항목 | 예시 |
|------|------|
| 용도 서술 | "상처에 감을 수 있다" |
| 효과 방향성 | "스트레스가 감소한다" |
| 수치 표시 | "배고픔 -30", "공격력 1.2~2.4" |
| 행위 조건 | "봉합용 실과 함께 사용하여 열상을 치료할 수 있다" |
| 제작 관계 | "요리의 재료로 사용된다" |

### 7.2 금지되는 서술

| 항목 | 예시 |
|------|------|
| 비교 | "이 무기가 더 강하다" |
| 추천 | "이걸 사용하는 것이 좋다" |
| 평가 | "효율적이다", "유용하다" |
| 등급/티어 | "상급 무기", "최고의 음식" |
| 추측 | "~할 수 있을 것이다", "~일 가능성이 있다" |
| 불필요한 수식어 | "직접적인 효과", "강력한 무기" |
| Evidence에 없는 관계 | "다른 아이템과 함께 사용된다" (근거 없이) |

---

> [STATUS NOTE / EXECUTION LOCK]
> 이 문서의 8.x 절에 포함된 “조건부 템플릿({IF ...}) / Evidence 기반 문장 활성화 / 수치 치환({MinDamage} 등)” 모델은
> 현재 Iris 설명 생성 파이프라인(A안: 블록 단위 활성화) 채택 이후 **비활성화(폐기)된 설계 잔재**다.
>
> **실행 기준은 다음 두 문서로 고정된다:**
> - iris-description-pipeline-spec-v1.0.md (유일한 실행 규칙)
> - iris-implementation-checklist-v1.0.md (검증 기준 / 실패 판정 근거)
>
> 따라서 8.x의 조건부/동적 요소는 **구현 대상이 아니며**, 구현 코드에서 **해석/지원/폴백/대체를 절대 수행하지 않는다.**

## 8. 소분류 템플릿 구조

### 8.1 템플릿 원칙

- **소분류 단위**로 템플릿을 작성한다 (아이템 단위 ❌)
- 각 템플릿은 해당 소분류의 **행위를 중심으로** 서술한다
- 템플릿 내 **조건부 문장**은 Evidence 기반으로 활성화된다
- 템플릿은 **문장 수 제한을 두지 않으며**, Evidence로 활성화되는 행위를 모두 포함할 수 있다

### 8.2 템플릿 예시

#### Tool · Cooking (1-D)

```
이 아이템은 조리에 사용되는 도구다.
요리 레시피의 수행 조건으로 요구된다.
{IF CanStoreWater}물을 담아 끓일 수 있다.{/IF}
```

#### Consumable · Medicine (3-C)

```
이 아이템은 의료 행위에 사용되는 소모품이다.
{IF CanBandage}상처에 감아 출혈을 막을 수 있다.{/IF}
{IF AlcoholPower}소독에 사용할 수 있다. (소독력: {AlcoholPower}){/IF}
{IF Medical}건강 상태에 영향을 준다.{/IF}
```

#### Combat · Short Blunt (2-C)

```
이 아이템은 근접 전투에서 무기로 사용된다.
한 손으로 사용하는 둔기 계열이다.
공격력: {MinDamage} ~ {MaxDamage}
```

#### Resource · Cooking Ingredient (4-B)

```
이 아이템은 요리의 재료로 사용된다.
조리 레시피에서 소모된다.
```

---

## 9. 다중 소분류 아이템 예시

### 9.1 망치 (Hammer)

**분류 결과**: Tool.1-A, Tool.1-B, Combat.2-C

**주 소분류**: Tool.1-A (기본값 — 대분류 번호 순)

**설명 출력**:

```
[Tool · Construction (1-A)] ← 주 소분류
이 아이템은 목공 및 금속 제작에 도구로 사용된다.
특정 제작 레시피의 수행 조건으로 요구된다.

[Tool · Disassembly (1-B)]
이 아이템은 가구 분해에 사용된다.

[Combat · Short Blunt (2-C)]
이 아이템은 근접 전투에서 무기로 사용된다.
한 손으로 사용하는 둔기 계열이다.
공격력: 0.8 ~ 1.5
```

### 9.2 프라이팬 (Pan)

**분류 결과**: Tool.1-D, Combat.2-C

**주 소분류**: Tool.1-D (메타 데이터로 명시)

```json
{
  "Base.Pan": {
    "iris_meta": {
      "primary_subcategory": "Tool.1-D"
    }
  }
}
```

**설명 출력**:

```
[Tool · Cooking (1-D)] ← 주 소분류
이 아이템은 조리에 사용되는 도구다.
요리 레시피의 수행 조건으로 요구된다.

[Combat · Short Blunt (2-C)]
이 아이템은 근접 전투에서 무기로 사용된다.
한 손으로 사용하는 둔기 계열이다.
공격력: 0.8 ~ 1.5
```

### 9.3 버번 위스키 (Bourbon)

**분류 결과**: Consumable.3-B, Consumable.3-C, Consumable.3-D, Resource.4-F

**주 소분류**: Consumable.3-B (기본값)

**설명 출력**:

```
[Consumable · Drink (3-B)] ← 주 소분류
이 아이템은 마실 수 있다.
갈증: -40

[Consumable · Medicine (3-C)]
이 아이템은 소독에 사용할 수 있다.
소독력: 4

[Consumable · Luxury (3-D)]
이 아이템은 알코올 음료다.
스트레스: -10
행복도: +10

[Resource · Miscellaneous (4-F)]
이 아이템은 제작의 재료로 사용된다.
(화염병 제작 등)
```

---

## 10. 문서 계층 관계

```
┌─────────────────────────────────────────────────────────────┐
│                    Philosophy.md                            │
│                    (최상위 헌법)                             │
└─────────────────────────────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        ▼                     ▼                     ▼
┌───────────────┐   ┌───────────────────┐   ┌───────────────────┐
│ Evidence      │   │ Rule DSL          │   │ 이 문서            │
│ Table/        │   │ Spec              │   │ (Item Description │
│ Allowlist     │   │                   │   │  Spec)            │
│               │   │                   │   │                   │
│ (분류 규칙)    │   │ (분류 실행)        │   │ (설명 생성)        │
└───────────────┘   └───────────────────┘   └───────────────────┘
        │                     │                     │
        └─────────────────────┼─────────────────────┘
                              ▼
                    ┌───────────────────┐
                    │ 최종 출력          │
                    │ (Iris 메뉴)        │
                    └───────────────────┘
```

---

## 11. 봉인 문장

> **Iris는 구조를 바꾸지 않고, 행위를 중심으로 설명을 재구성하며, 주 소분류는 '대표 맥락'으로서 설명의 시작점만 정렬한다.**

---

## 변경 이력

| 버전 | 날짜 | 내용 |
|------|------|------|
| 1.0 | 2026-01-28 | 최초 작성. 합의된 설계 결론 문서화 |
