Pulse 생태계 설계 철학

이는 절대 어기면 안됨

[1] Echo, Fuse, Nerve, Iris, Frame, Cortex, Canvas는 Pulse의 기능들을 참조하고 의존성을 가져도 되지만 Pulse는 Echo, Fuse, Nerve, Iris, Frame, Cortex, Canvas를 참조하거나 의존성을 가지면 절대 안됨.

[2] 기본적으로 Hub & Spoke 구조를 지켜야함. Echo, Fuse, Nerve, Iris, Frame, Cortex, Canvas는 절대 서로를 참조하거나 의존성을 가지면 안됨. 어떠한 기능을 구현하기 위해 참조를 해야할경우 중간에 Pulse를 경유하는 방식으로 구현해야함.

[3] SPI 구조를 사용해야함.

[4] 타 모드와의 호환성이 1순위여야함. 

[5] Pulse 생태계의 각 모듈은 각자의 역할을 고수하고 Pulse 생태계 내부의 타 모듈들의 역할을 침범하면 안됨.(구조 경계를 선명화하기 위한 내부 규정임)

1. Pulse - 모드로더 겸 플랫폼의 역할 [기반적 기능]

Pulse의 유일한 정체성은 "자유도". 완전한 샌드박스형 모딩 플랫폼이 목표임

아무 목표도 없는, 다만 무너지지 않고 탄탄한 기반만 제공하는 '휑한 들판'같은 플랫폼

오로지 기반적 기능만 가져야하고 이를 API 등의 형태로 타 모드에 제공해야함

모드적 기능은 포함하면 절대 안됨

-> 버전 업데이트에 강한 내성을 가지게 됨

편의성 기능을 추가하지 말것 -> Cortex로 이전.

목표는 Fabric형 얇은 플랫폼

결정/정책은 절대 하지 않음.

퍼스트 파티 모드라 잘 돌아가는게 아닌 플랫폼이 좋아서 퍼스트 파티 모드가 잘 돌아가도록 만들어야함.

목표는 기존의 모딩 생태계(Lua 기반 모드)와 새로운 모딩 생태계(Mixin 기반 모드)를 융합하여 모더들에겐 더 큰 모딩 자유도를, 일반 유저들에겐 더 큰 모드 선택지를 제공하는것.

나중에 리소스팩 관련으로 지원 기능을 추가할 예정

2. Echo - 병목 지점을 찾아내는 프로파일링 모드 [관찰]

오로지 Pulse의 기능만 사용하고 프로파일링 로직 자체는 Echo 내에서만 처리

현재 Tick / Phase / Subsystem / Scope 계층 프로파일링 가능

Lua Profiling 기능 역시 탑재

다만 프로파일링 모드기에 주요 수요층이 모더들로 한정됨. -> 공개 전략에서 되도록이면 후순위.

---

PZ 최적화 “전체 지형도” (10개 구역) 

1. 좀비 AI / 업데이트 스텝 

2. 월드 스트리밍 / 청크 로딩

3. 차량/고속 이동 중 스파이크

4. 라이팅/가시성/렌더 스파이크

5. 아이템/인벤/컨테이너/UI

6. 이벤트 디스패치(모드 훅 포함)

7. 경로탐색/충돌/물리

8. 세이브/로드/IO 스톨

9. 네트워크/멀티 동기화

10. GC/할당 압력(자바 힙 변동)

---

3. Fuse - Mixin을 사용하는 안정성 레이어 역할의 모드 [오로지 Mixin만 사용한 엔진 안정화]

오로지 Pulse의 기능만을 사용하고 안정성 레이어 역할 로직 자체는 Fuse 내에서만 처리

Fuse가 할 수 있는 구역

(1) 좀비 AI / 업데이트 스텝

(4) 라이팅/가시성/렌더 스파이크 - B42 업데이트 대비 보류

(7) 경로탐색/충돌/물리

(8) 세이브/로드/IO 스톨 - 덩어리 스파이크로 인해 사실상 해결 불가

(10) GC / 할당 압력 - 덩어리 스파이크로 인해 사실상 해결 불가

절대 기존의 엔진 로직을 고치거나 변경하는 시도는 절대 안됨 - 엔진 포크 시도X

안정화 모드라는 특성상 모든 유저들이 주 수요 대상

4. Nerve - Lua를 사용하는 안정성 레이어 역할의 모드 [100% Lua만 사용한 UI/이벤트 안정화]

오로지 Pulse의 기능만을 사용하고 안정성 레이어 역할 로직 자체는 Nerve 내에서만 처리

Nerve가 할 수 있는 구역

(5) 아이템/인벤/컨테이너/UI - 사례가 극히 드물어 폐기 결정

(6) 이벤트 디스패치(모드 훅 포함)

(9) 네트워크/멀티 동기화

Nerve가 관리하는 영역 특성상 무거운 모드팩/ 멀티 유저들이 주 수요 대상

5. Iris - [100% Lua를 사용하는 위키피디아형 모드]

"질문은 다르되, 대답의 태도는 같다"

기본 바닐라 툴팁 위에 Alt 키를 눌렀을 때만 Iris 툴팁이 표시되어 용도와 더 자세한 설명이 나오도록 해야함. 길이는 최대 4줄.

아이템을 오른 클릭을 했을때 "Iris 메뉴에서 더보기" 버튼을 클릭했을때 Iris 모드 메뉴(위키)가 나타나 더욱 세부적인 정보를 제공(실용적인 정보만)

Iris 메뉴는 대분류 - 소분류 - 아이템 목록 - 아이템 설명 순으로 구성될 예정이고 각 칸의 크기는 아이템 설명 > 대분류 > 소분류 = 아이템 목록 순으로 이루어질 예정

위키피디아 모드인 이상 게임플레이에 실질적인 도움이 되는 정보를 담아야 함.

대신 해석, 권장, 비교는 엄격히 금함.

Iris 메뉴에 담기는 정보들은 전부 툴팁보다는 상세해야하며 툴팁에선 찾아보지 못하는 정보를 담아야함.

Iris 시스템은 총 3단계로 구성됨

그리고 그 각 단계 또한 여러개의 층위로 구성됨

1단계 증거 시스템는 2개의 동일 2트랙으로 구성됨

1-1. 레시피 기반 증거 시스템 1-2. 우클릭 행동 기반 증거 시스템

2단계 아이템 분류 시스템

2-1. 대분류 2-2. 소분류 2-3. 아이템 목록 2-4. 아이템 설명란

3단계 아이템 설명란

3-1. 아이템의 기초 설명 3-2. 주 소분류 설명 3-3. 아이템의 개별 설명 3-4. 아이템의 관련 레시피나 관련 우클릭 행동 등의 관련 정보(가제) 3-5. 아이템의 세부 정보 (Iris 내부 분류 정보 등)

6. Frame - Pulse의 기능을 사용하여 Lua 대형 모드팩을 관리하기 쉽게 만들수있도록 지원해주는 모드

사실상 Pulse를 표준 플랫폼으로 격상시킬 열쇠. 진정한 플랫폼 킬러앱

모드팩을 위한 프좀판 git

작동 방식

메인 - 수동 스냅샷 + 세션 기반

보조 - 자동 스냅샷(보험용) + 이벤트 기반(태그용)

Frame은 모드가 아니라 모드팩을 대상으로 삼는,
Project Zomboid 대형 모드팩의 구성과 재현을 가능하게 하는
Pulse 생태계의 관리자 레이어다.

7. Cortex - Pulse위에서 모딩할때 가이드를 해주는 모드

Pulse, Echo, Fuse, Nerve, Iris, Frame에 못 들어가는 편의성 기능들을 담당할 "격리 구역"

초기엔 리소스팩 관련 가이드 및 편의 기능 역시 담당할 예정이지만 추후 리소스팩 기능이 성공적일 경우 Canvas라는 별개의 모듈로 관련 기능을 이전할 예정

8. Canvas - 리소스팩 관련 기능을 담당할 별개의 모듈

아직은 존재만 계획, 추후 리소스팩 관련 기능의 성공 여부에 따라 존폐를 결정할 예정

Pulse 생태계 공개 전략

대전제

1. 개발은 공개 전략 실행 이전에 사실상 완료되어야 함.

2. 각 단계는 이전 단계에서의 성공, 최소한 보통을 담보로 진행함.

3. 공개 전략의 시작 시기는 B42 정식 출시 이후 일주일 이내로 고정함.

4. 공개 형태는 무조건 오픈 소스로

공개 전략 1단계: Iris를 프좀갤에서 Github 링크로 선공개.

Nerve를 넌지시 암시함. Fuse, Pulse, Echo는 절대 언급금지

3. 프좀갤에서 피드백을 받아서 Iris를 보강 후 스팀 창작마당에 업로드

여기서도 Nerve를 기술적인 부분보단 기능적인 부분을 중심으로 넌지시 암시함. Fuse, Pulse, Echo는 절대 언급금지

4. Nerve를 스탠드얼론 버전으로 프좀갤에서 Github 링크로 선공개.

Fuse를 기술적인 부분보단 기능적인 부분을 중심으로 넌지시 암시함. Pulse, Echo는 절대 언급금지

5. 프좀갤에서 피드백을 받아서 Nerve를 보강 후 스팀 창작마당에 업로드

여기서도 Fuse를 기술적인 부분보단 기능적인 부분을 중심으로 넌지시 암시함. Pulse, Echo는 절대 언급금지

6. Fuse를 프좀갤에서 Github 링크로 선공개.

Fuse, Echo는 Pulse에 의존하는 Java를 사용하는 모드기에 Pulse의 경량형 라이브러리가 탑재되어야함.

7. Pulse, Echo를 프좀갤에 공개.

8.Pulse의 API를 사용하여 더 매끄럽게 돌아가는 Nerve+를 함께 공개. Fuse를 Pulse 의존성으로 수정.

창작마당에 있는 Nerve는 핵심기능만, Pulse 의존성을 가진 Nerve+는 핵심기능 + 편의기능을 포함함. Fuse는 처음부터 기반이 없었기에 Pulse 의존성으로 바꾸기 수월함. Fuse 사용자들에게 갑작스럽다고 느끼지않게 미리 "추후 안정성을 위해 대규모 변경 가능"이라고 명시해두기.
 
9. 이후 Frame과 Cortex를 프좀갤에 Github 링크로 선공개. 